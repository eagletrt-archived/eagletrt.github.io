

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Eagle Steering Wheel &mdash; EAGLEDOC 0.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="EAGLEDOC 0.2 documentation" href="index.html"/>
        <link rel="up" title="Volante" href="volante.html"/>
        <link rel="next" title="Eagle Steering Wheel OLD" href="volanteTurnOnSteerOLD.html"/>
        <link rel="prev" title="Guida per crosscompilare le librerie Qt per Raspberry" href="volanteCrosscompilazione.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> EAGLEDOC
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="design.html">Design Presentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="volante.html">Volante</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="volanteCrosscompilazione.html">Guida per crosscompilare le librerie Qt per Raspberry</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Eagle Steering Wheel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#accensione-chimera-evoluzione">Accensione Chimera Evoluzione</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collegamento-al-volante-via-ssh">Collegamento al Volante via SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="#effettuare-modifiche-al-codice-e-fare-il-deploy-dell-eseguibile">Effettuare modifiche al codice e fare il deploy dell&#8217;eseguibile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="volanteTurnOnSteerOLD.html">Eagle Steering Wheel OLD</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webplatform.html">Web Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensori.html">Sensori</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">EAGLEDOC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="volante.html">Volante</a> &raquo;</li>
      
    <li>Eagle Steering Wheel</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="images/wallpaper.png" src="images/wallpaper.png" />
<div class="section" id="eagle-steering-wheel">
<h1>Eagle Steering Wheel<a class="headerlink" href="#eagle-steering-wheel" title="Permalink to this headline">¶</a></h1>
<div class="section" id="accensione-chimera-evoluzione">
<h2>Accensione Chimera Evoluzione<a class="headerlink" href="#accensione-chimera-evoluzione" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La procedura può essere seguita da chiunque fintanto che sono accesi i sistemi Low Voltage (LV), non appena il Tractice System (TS) è accesso rifarsi ad un ESO o ad una persona esperta.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Per questa procedura sono necessari almeno un pilota e uno o due ESO. Il secondo ESO è facoltativo e deve solamente assicurarsi di premere i funghi di shutdown in caso di emergenza.</p>
</div>
<ul>
<li><p class="first"><strong>Accensione sistema low voltage</strong></p>
<blockquote>
<div><ul class="simple">
<li>Assicurarsi che la macchina sia spenta verificando che gli interrutori TSMS (Tractive System Master Switch) e GLVMS (Grounded Low Voltage System) posti sul lato destro della macchina siano in posizione di OFF (posizione verticale)</li>
<li>Assicurarsi che tutti i cavi/collegamenti siano in ordine, se non si è sicuro chiedere a chi può saperlo e aspettare la conferma.</li>
<li>Assicurarsi che nessuno stia lavorando alla macchina.</li>
<li>Accendere l&#8217;interrutore (BMSLV) posto sul porchetto sul lato sinistro della macchina e aspettare 5 secondi, se il LED si accende lampeggiando o in dissolvenza procedere al punto 4 altrimenti spegnere l&#8217;interruttore.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>FASE DI IDLE</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Girare in senso orario e con decisione l&#8217;interruttore cerchiato rosso GLVMS (lato destro macchina), assicurarsi che i sistemi LV si accendano correttamente (TSAL e volante accesi sono sufficienti). Se nessun sistema si accende rigirare immediatamente l&#8217;interrutore sulla posizione di spegnimento (posizione verticale).</p>
</li>
<li><p class="first">Una volta acceso il volante controllare le varie tab e la presenza di tutte le centraline collegate specialmente:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Electronic Control Unit (ECU)</strong> -&gt; Presenza di bollino verde.</li>
<li><strong>BMS High Voltage</strong> -&gt; Presenza del voltaggio totale, temperatura.</li>
<li><strong>Pedaliera</strong> -&gt; Presenza del bollino verde.</li>
<li><strong>BMS Low Voltage</strong> -&gt; Presenza del voltaggio totale, temperatura.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Accensione Tractive System</strong></p>
<blockquote>
<div><ul class="simple">
<li>Procurarsi un multimetro, impostarlo sulla scala 1000V e inserire i suoi terminali &#8220;banana&#8221; tra le bocchette TS- e TS+ (le bocchette sono all&#8217;interno di un&#8217;area rettangolare arancione) presenti sotto l&#8217;interruttore TSMS (Tractive System Master Switch).</li>
<li>Assicurarsi di indossare gli appositi guanti isolati.</li>
<li>Girare in senso orario e con decisione l&#8217;interruttore cerchiato arancione TSMS (lato destro macchina), assicurarsi che il multimetro non misuri tensione altrimenti rigirare immediatamente l&#8217;interruttore sulla posizione di OFF.</li>
<li>PRECARICA: A questo punto si preme il tasto a volante in basso a SX (vicino al tasto START verde insomma) e scatta il primo AIR, in questa fase il voltaggio misurato aumenta lentamente fino al 90% del voltaggio letto sul volante. Dopo 15 Secondi scatta anche il secondo AIR e il voltaggio misurato raggiunge il voltaggio letto sul volante. Se la tensione diminuisce o non aumenta significa che lo shutdown è stato attivato quindi girare con decisione TSMS sulla posizione di spegnimento, aspettare di misurare 0 Volt sul multimetro e poi girare con decisione GLVMS sulla posizione di spegnimento. Ripetere tutta la procedura dal punto 0 verificando il motivo di spegnimento (chiedere ad ESO).</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>FASE DI SET-UP</strong></p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Da questa fase in poi tenere sempre una mano sui funghi di shutdown. In caso di pericolo premerli con forza.</p>
</div>
<ul>
<li><p class="first">ACCENSIONE INVERTER: A questo punto in alto a destra si vedrà che la macchina passa da IDLE a SET-UP (icona gialla). Andare quindi nella terza tab (paddle DX 2 volte). Qui si vede che la precharge è verde. Premere il tasto in basso a DX una volta per entrare nella modalità di selezione, e un&#8217;altra volta per scendere di una riga e selezionare l&#8217;inverter sinistro. Premere il tasto in basso a SX per accenderlo. Una volta acceso, il led (virtuale, quello grigio) corrispondente diventerà verde. Premere quindi di nuovo in basso a DX per selezionare la riga dopo, e premere in basso a SX per accenderlo. Una volta acceso anche questo (tutto verde quindi), premere in alto a SX per uscire dalla modalità di selezione. Premere quindi il paddle DX per andare nella racing page.</p>
<blockquote>
<div><ul>
<li><div class="first admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In caso di emergenza (ruote che schizzano) premere i funghi di shutdown!</p>
</div>
</li>
<li><div class="first admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ci mette tipo un secondo perchè deve caricare tutte le immagini di quella tab, portate pazienza, non schiacciate il paddle millemila volte. Fatto questo, selezionate la mappa con il manettino a destra (blu). La 1 è la retro e preferirei non venga usata per ora (mai testata). Usate le altre mappe, dalla 2 alla 6. A vadena usavamo max la 4 perchè la 5 era quella che faceva spegnere tutto. Mappa 4 sono circa 72kw a quanto pare.</p>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Controllare sempre che i valori di tensione e temperature letti a volante siano nella norma e verificare che la tensione letta con il multimentro corresponda a quella sul volante.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>FASE DI RUN</strong></p>
<blockquote>
<div><ul class="simple">
<li>Scelta la mappa, tenete frenato e schiacciate in alto a SX. Questo fa andare la macchina in RUN, facendo suonare il buzzer per almeno due secondi e facendo diventare l&#8217;icona verde.</li>
<li>Verificare che la tensione letta con il multimentro corresponda a quella sul volante e poi rimuovere le &#8220;banane&#8221; dalle bocchette TS+ e TS-. Se la tensione diminuisce significa che lo shutdown è stato attivato quindi girare con decisione TSMS sulla posizione di spegnimento, aspettare di misurare 0 Volt sul multimetro e poi girare con decisione GLVMS sulla posizione di spegnimento. Ripetere tutta la procedura dal punto 0 verificando il motivo di spegnimento (chiedere ad ESO).</li>
<li>Se tutte le procedure precedenti sono state seguite correttamente la macchina è accesa. Enjoy it.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>FASE DA RUN A SET-UP E SPEGNIMENTO</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Per tornare in set-up una volta fermi, premere di nuovo in alto a SX. Se dopo 2-3 secondi non è in set-up, rischiacciatelo. Se la macchina non torna in set-up verificare che la tensione letta con il multimentro tra le bocchette TS+ e TS- corrisponda a quella sul volante. Se la tensione letta corrisponde la macchina è bloccata quindi spegnere la macchina tramite una delle due procedure:</p>
</li>
<li><p class="first">Procedura di arresto di emergenza tramite funghi di shutdown.</p>
</li>
<li><p class="first">Girare con decisione TSMS sulla posizione di spegnimento, aspettare di misurare 0 Volt sul multimetro e poi girare con decisione GLVMS sulla posizione di spegnimento. Ripetere tutta la procedura dal punto 0 verificando il motivo di spegnimento (chiedere ad un ESO).</p>
</li>
<li><p class="first">Una volta in set-up (icona gialla), tornare sulla tab 1 e premere STOP (in basso a DX) per spegnere la macchina. Verificare che la tensione letta con il multimentro tra le bocchette TS+ e TS- corrisponda sia 0V. Se la tensione non scende spegnere la macchina tramite una delle due procedure:</p>
<blockquote>
<div><ul class="simple">
<li>Procedura di arresto di emergenza tramite funghi di shutdown.</li>
<li>Girare con decisione TSMS sulla posizione di spegnimento, aspettare di misurare 0 Volt sul multimetro e poi girare con decisione GLVMS sulla posizione di spegnimento. Ripetere tutta la procedura dal punto 0 verificando il motivo di spegnimento (chiedere ad un ESO).</li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In tutto questo, in ogni momento, si può usare il manettino di sinistra. Indipendentemente dalla sua posizione iniziale, quando parte la macchina le pompe vanno in automatico (come se il manettono fosse su AUTO). Se si vuole invece usare un&#8217;altra modalità, una volta partita l&#8217;interfaccia grafica del volante, bisogna girarlo sulla posizione voluta. Se è su 2 e si vuole lasciare su 2, per esempio, bisogna comunque metterlo tipo su 1 e poi di nuovo su 2, altrimenti rimane in AUTO. La posizione 1 (la seconda, ma quella con il numero 1) non funziona per qualche motivo, quindi usate solo posizioni OFF, 2 (50%), 3 (75%), 4 (100%) e AUTO.</p>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="collegamento-al-volante-via-ssh">
<h2>Collegamento al Volante via SSH<a class="headerlink" href="#collegamento-al-volante-via-ssh" title="Permalink to this headline">¶</a></h2>
<p>Per connettersi al volate è necessario che questo sia acceso (si può testarlo in macchina oppure attaccandolo all&#8217;alimentatore da banco.)
Bisognerà poi creare un hotspot al quale il raspberry si collegherà automaticamente, come anche il vostro dispositivo per poter effettuare una connesione SSH.</p>
<div class="highlight-sh"><div class="highlight"><pre>ssh pi@eaglepi
</pre></div>
</div>
<p>Il prompt vi richiederà la password di <a class="reference external" href="mailto:pi&#37;&#52;&#48;eaglepi">pi<span>&#64;</span>eaglepi</a>: la password è <strong class="program">eaglepi</strong></p>
<p>Una volta collegati al volante, per far iniziare il programma è necessario cercare l&#8217;eseguibile e digitare questo comando:</p>
<div class="highlight-sh"><div class="highlight"><pre>./EagleSteeringWheel
</pre></div>
</div>
<p>Per riavviare il programma è sufficiente premere &lt;Ctrl-C&gt;</p>
</div>
<div class="section" id="effettuare-modifiche-al-codice-e-fare-il-deploy-dell-eseguibile">
<h2>Effettuare modifiche al codice e fare il deploy dell&#8217;eseguibile<a class="headerlink" href="#effettuare-modifiche-al-codice-e-fare-il-deploy-dell-eseguibile" title="Permalink to this headline">¶</a></h2>
<p>Se si desiderano effettuare modifiche al codice (sia alla parte C++ che a quella QML) e vederle applicate sul volante è sufficiente utilzzare gli script rasp_deploy.sh e deploy.sh entrambi presenti nella cartella Volante.</p>
<p>Il primo inizialmente monta la cartella contente il filesystem presente sul raspberry in una cartella di sistema (qualora non fosse ancora stata montata), successivamente compila il programma per Raspberry (in caso ci fossero file modificati rispetto alla versione già compilata) e lo invia tramite scp (SSH COPY) al volante collegato wireless.</p>
<p>Se l&#8217;output finale fosse qualcosa di simile a &#8221;./EagleSteeringWheel: file busy&#8221;, significa che il programma è ancora in esecuzione sul Raspberry. In questo caso è sufficiente chiudere il programma sul Raspberry e far girare nuovamente lo script rasp_deploy.sh</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo killall Eaglestee<span class="o">(</span>tab<span class="o">)</span>
</pre></div>
</div>
<p>Oppure, con top, trovaimo il pid del processo e killiamo il processo. P.S. (tab) per autocompletamento</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">kill</span> -9 pid
</pre></div>
</div>
<p>Comando per compilare &amp; deploy (su terminale):</p>
<div class="highlight-sh"><div class="highlight"><pre>./rasp_deploy.sh
</pre></div>
</div>
<p>Ora dobbiamo far partire il programma con:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo ./Eaglestee<span class="o">(</span>tab<span class="o">)</span>
</pre></div>
</div>
<p>Dalla cartella locale Volante mandare lo script e inserire <strong class="program">raspberry</strong>, se è vuoa inserire la password sudo personale.</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo ./raspberry
</pre></div>
</div>
<p>Il secondo (deploy.sh) serve per far partire il simulatore del volante sul PC locale. Questo script compila un progetto diverso che integra i file necessari per emulare i tasti e la seriale che si trovano sul volante quando è collegato in macchina.
Lo scopo di questo simulatore è di testare il codice in locale, velocemente e con maggiore controllo di quello che sta accandendo e di verificarne il reale funzionamento in macchina in una seconda fase.</p>
<p>Questo script crea una seriale virtuale con socat e due symlink (ttyV0 e ttyV1) che servono come endpoint per scrivere e leggere sulla seriale. Lo script fa partire sia il simulatore del volante che il simulatore della centralina, che risponde opportunamente agli input del volante.</p>
<p>Comando per compilare &amp; deploy (su terminale):</p>
<div class="highlight-sh"><div class="highlight"><pre>./deploy.sh
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">IMPORTANTE CREARE UNA CARTELLA BUILD NELLA DIRECTORY CORRENTE</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="volanteTurnOnSteerOLD.html" class="btn btn-neutral float-right" title="Eagle Steering Wheel OLD" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="volanteCrosscompilazione.html" class="btn btn-neutral" title="Guida per crosscompilare le librerie Qt per Raspberry" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Eagle Trento Racing Team.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>